# ClearBlueSky v7.0 - Changes Summary

**Date:** February 6, 2026  
**Status:** Ready for testing

---

## All Changes Made

### 1. Velocity Pre-Market Hunter Scanner
- **Added:** New scan type combining emo dip logic with Velocity universe
- **Location:** `app/velocity_scanner.py` (new file)
- **Integration:** Wired into `app.py` worker, scan types, GUI dropdown
- **Behavior:** 
  - When Index = S&P 500/Russell/ETFs: scans up to 200 tickers from that index
  - When Index = Velocity (high-conviction): scans fixed list (TQQQ, SOXL, NVDA, TSLA, etc.)
  - Scores 4 signal types: gap recovery, accumulation, breakout, gap-and-go
  - Grades A+ to F; generates entry plans for A+/A/B grades

### 2. Swing Scanner + Velocity Universe
- **Modified:** `app/emotional_dip_scanner.py`, `app/enhanced_dip_scanner.py`
- **New function:** `get_dips_from_ticker_list()` for custom ticker lists
- **Behavior:** Swing - Dips scanner can now use Index = "Velocity (high-conviction)" to run emotional dip logic on Velocity universe only

### 3. Index Dropdown Expansion
- **Modified:** `app/app.py`
- **Added:** "Velocity (high-conviction)" as 4th index option
- **Available for:** All index-based scanners (Trend, Swing, Pre-Market, Velocity Pre-Market Hunter)

### 4. In-App Updater & Rollback
- **Added:** `app/updater.py` (new file)
- **Features:**
  - **Update:** Backs up current version â†’ downloads latest from GitHub â†’ applies (preserves user_config.json)
  - **Rollback:** Restores from last backup (preserves user_config.json)
  - Auto-detects repo structure (app/ subfolder)
- **UI:** Update and Rollback buttons in main window
- **Backups:** Stored in `app/update_backups/`

### 5. Versioning & Update Docs
- **Added:** `UPDATE.md` (root) - updater usage and versioning policy
- **Policy:** From v7.0 onward: strict 7.1, 7.2, 7.3, etc.
- **GitHub sync:** Updater uses GitHub releases API; tags match versions

### 6. Elite Swing Trader System Prompt
- **Modified:** `app/report_generator.py`
- **Replaced:** Master Trading Report Directive â†’ Elite Swing Trader System Prompt
- **Focus:** 
  - 1-5 day maximum hold (optimal 1-2 days)
  - S&P 500 stocks + leveraged ETFs
  - Specific entry/exit windows (8AM-8AM cycle)
  - T+1 settlement rules
  - Leveraged ETF 3-day max
  - Weekend management
  - Position sizing by conviction
  - The 1-2-5 exit framework

### 7. GitHub Attribution in Reports
- **Modified:** `app/report_generator.py`
- **Added to all reports:**
  - PDF footer: "This report was generated by ClearBlueSky Stock Scanner. GitHub: https://github.com/ClearblueskyTrading/Clearbluesky-Stock-Scanner/releases"
  - AI directive (end of prompt)
  - JSON instructions field
  - _ai.txt system prompt

### 8. Header Subtitle Update
- **Modified:** `app/app.py`
- **Changed:** "AI Research Tool Â· made with Claude" â†’ "AI Stock Research Tool Â· works best with Claude AI"

### 9. Quick Lookup (1-5 Tickers)
- **Modified:** `app/app.py`
- **Enhanced:** Entry field now accepts 1-5 ticker symbols (comma or space separated)
- **Label:** Changed to "Symbols (1-5):"
- **Width:** Expanded to 20 characters
- **Report type:** "Quick Lookup"

### 10. Import/Export Config
- **Modified:** `app/app.py`
- **Added:** ðŸ’¾ Config button (next to Logs)
- **Features:**
  - **Export:** Saves full `user_config.json` (all settings + API keys) for backup
  - **Import:** Restores config from backup file
  - Security warning: "Backup includes API keys - keep it secure!"
- **Use cases:** Backup before updates, transfer to new PC, fresh install restore

### 11. Release Infrastructure
- **Added:** `build_release_zip.py` (root) - automated clean release zip builder
- **Excludes:** user_config.json, error_log.txt, __pycache__, reports, scanner_output, rag_store, update_backups, sample PDFs, GITHUB_PUSH.md
- **Output:** `ClearBlueSky-v{VERSION}.zip` (reads version from app.py)

### 12. .gitignore Updates
- **Added:** `app/update_backups/`, `app/update_backup_manifest.json`

---

## File Changes Summary

### New Files (6)
1. `app/velocity_scanner.py` - Velocity Pre-Market Hunter scanner
2. `app/updater.py` - Update/rollback system
3. `app/VELOCITY_PREMARKET_README.md` - Velocity scanner docs
4. `UPDATE.md` (root) - Updater and versioning docs
5. `build_release_zip.py` (root) - Release zip builder
6. `ClearBlueSky-v7.0.zip` (root, gitignored) - Clean release package

### Modified Files (9)
1. `app/app.py` - Updater UI, Quick Lookup 1-5, Import/Export Config, Velocity scanner wiring, header subtitle, index dropdown
2. `app/emotional_dip_scanner.py` - Velocity universe support
3. `app/enhanced_dip_scanner.py` - get_dips_from_ticker_list()
4. `app/scan_settings.py` - velocity_premarket in DEFAULT_SCAN_TYPES and SCAN_PARAM_SPECS
5. `app/scan_types.json` - velocity_premarket entry
6. `app/report_generator.py` - Elite Swing Trader prompt, GitHub attribution
7. `app/CHANGELOG.md` - v7.0 changes documented
8. `README.md` (root) - Updated for all v7.0 features
9. `.gitignore` - update_backups exclusion

---

## GitHub Status

- **Branch:** main
- **Tag:** v7.0 (updated, pushed)
- **Release:** v7.0 updated with new notes and clean zip
- **Commits:** 6 commits since v7.0 tag
  1. v7.0 base (Velocity Hunter, updater, versioning)
  2. Elite Swing Trader prompt
  3. GitHub attribution in reports
  4. Header subtitle update
  5. Quick Lookup 1-5 tickers
  6. Import/Export Config + docs

---

## Ready for Testing

**Test Plan:**

1. **Launch:** App starts, shows v7.0, new header subtitle
2. **Scanners:** All 7 scanners in dropdown (including Velocity Pre-Market Hunter)
3. **Index:** 4 options (S&P 500, Russell 2000, ETFs, Velocity (high-conviction))
4. **Quick Lookup:** Enter "AAPL, MSFT, NVDA" â†’ Report button â†’ PDF with 3 tickers
5. **Import/Export Config:** ðŸ’¾ Config button â†’ Export â†’ Import (verify settings preserved)
6. **Update/Rollback:** Update button (won't update - already on latest); Rollback enabled after update
7. **Reports:** PDF has Elite Swing Trader prompt + GitHub footer
8. **Help:** Shows all 7 scanners, Quick Lookup, Import/Export Config info

**Current State:** App is running (PID 25876), ready for manual testing.

---

*All changes committed to main and synced with GitHub.*
